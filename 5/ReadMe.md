# Проект "Buzzer Melodies" для Raspberry Pi

Привет! Этот репозиторий содержит код для нашего проекта **"Buzzer Melodies"** — небольшого, но интересного приложения для Raspberry Pi, которое позволяет управлять активным зуммером через графический интерфейс. Мы создали его, чтобы продемонстрировать, как можно объединить простое аппаратное управление с удобным GUI на Linux-системах.

---

## Что мы сделали?

В рамках этого проекта мы разработали C-приложение, использующее библиотеку **GTK+** для создания интуитивно понятного пользовательского интерфейса и **`libgpiod`** для взаимодействия с GPIO Raspberry Pi. Наша цель была не только заставить зуммер пищать, но и сделать это красиво, с возможностью выбора различных мелодий, и при этом решить типичные проблемы с правами доступа к GPIO, с которыми многие сталкиваются.

В частности, мы реализовали:

* **Графический интерфейс**: Простое окно с радиокнопками для выбора мелодии и кнопкой "Проиграть".
* **Управление зуммером**: Функциональность для включения и выключения активного зуммера, подключенного к GPIO17.
* **Различные мелодии**: Запрограммировали три уникальных звуковых паттерна, которые можно выбрать и воспроизвести.
* **Использование `libgpiod`**: Перешли на эту современную библиотеку для работы с GPIO, что позволяет нам более надёжно и безопасно управлять пинами, часто даже без необходимости запускать приложение от имени `sudo` (при правильной настройке системы).
* **Чистая архитектура**: Код разделён на логические функции, что упрощает понимание и дальнейшее развитие проекта.

---

## Почему `libgpiod`?

На ранних этапах проекта мы использовали другую библиотеку (`pigpio`), но столкнулись с частыми проблемами, связанными с правами доступа и необходимостью запускать приложение с повышенными привилегиями. Переход на **`libgpiod`** стал ключевым решением. Это библиотека, которая является частью официальной Linux-инфраструктуры для работы с GPIO. Она обеспечивает более современный и стабильный API, а также позволяет настроить доступ к GPIO для обычных пользователей через `udev`-правила, что значительно повышает удобство и безопасность использования нашего приложения.

---

## Схема подключения

Для корректной работы приложения вам потребуется подключить активный зуммер к Raspberry Pi через NPN-транзистор. Это необходимо, так как GPIO-пины Raspberry Pi не могут выдавать достаточный ток для прямого питания большинства зуммеров.

```text
           Raspberry Pi
              +------+
       GPIO17 --|      |
                  |      |
                  +------+
                      |
                      R1 (1 кОм)
                      |
                      V
                  +---+---+  (База)
                  |       |<--- NPN Транзистор (например, BC547)
           (Коллектор) >|       |
                  |   +---+---+
                  |           ^ (Эмиттер)
                  |           |
                  |           |
        +5V -----|           |-----> GND (Земля Raspberry Pi)
                  |           |
                  |           V
                  |       +-------+
                  +------>| ЗУММЕР |
                          +-------+
                            (-) (+)
````

**Важные примечания:**

  * **Резистор R1 (1 кОм)**: Подключается между GPIO17 и базой транзистора. Он ограничивает ток, защищая GPIO-пин.
  * **NPN-транзистор**: Эмиттер подключается к **GND** Raspberry Pi. Коллектор подключается к отрицательному выводу активного зуммера.
  * **Активный зуммер**: **Обязательно соблюдайте полярность\!** Положительный (+) вывод зуммера подключается к пину **+5V** Raspberry Pi.

-----

## Как скомпилировать

Для компиляции приложения вам понадобится компилятор GCC и установленные библиотеки `gtk+-3.0` и `libgpiod`.

1.  **Установите зависимости (если еще не установлены):**

    ```bash
    sudo apt update
    sudo apt install libgtk-3-dev libgpiod-dev
    ```

2.  **Сохраните исходный код** (например, как `buzzer_app.c`).

3.  **Скомпилируйте:**

    ```bash
    gcc buzzer_app.c -o buzzer_app $(pkg-config --cflags --libs gtk+-3.0 gpiod)
    ```

-----

## Как запустить

После успешной компиляции вы можете запустить приложение:

```bash
./buzzer_app
```

Если возникают проблемы с правами доступа к GPIO, убедитесь, что ваш пользователь находится в соответствующей группе (`gpio`) или что настроены `udev`-правила.

-----

Мы надеемся, что этот проект будет полезен для тех, кто изучает взаимодействие аппаратного обеспечения с GUI на Raspberry Pi\! Если у вас есть вопросы или предложения, не стесняйтесь открывать Issues или Pull Requests.

```
