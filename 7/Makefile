# @file Makefile
# @brief Makefile для сборки GTK-приложения и драйвера LCD1602.
#
# Этот Makefile автоматизирует процесс компиляции исходных файлов C
# (lcd_gui.c и lcd1602.c) и компоновки их в исполняемый файл 'lcd_gui'.
# Он использует pkg-config для автоматического определения флагов компиляции и
# библиотек GTK+ 3.
#
# @note Предназначен для использования на системах с установленным GTK+ 3 и GCC.

# Компилятор C
CC = gcc

# Флаги компилятора:
# `pkg-config --cflags gtk+-3.0` - автоматически добавляет необходимые флаги для заголовочных файлов GTK+ 3.
# -Wall - включает все предупреждения компилятора, что помогает писать более чистый и безопасный код.
CFLAGS = `pkg-config --cflags gtk+-3.0` -Wall

# Библиотеки для компоновки:
# `pkg-config --libs gtk+-3.0` - автоматически добавляет необходимые библиотеки GTK+ 3 для компоновки.
LIBS = `pkg-config --libs gtk+-3.0`

# Цель по умолчанию: 'all'. При вызове 'make' без аргументов, будет выполнена эта цель.
all: lcd_gui

# Цель 'lcd_gui': Компонует объектные файлы в конечный исполняемый файл.
# Зависимости: lcd_gui.o и lcd1602.o (объектные файлы).
lcd_gui: lcd_gui.o lcd1602.o
	$(CC) -o lcd_gui lcd_gui.o lcd1602.o $(LIBS)

# Цель 'lcd_gui.o': Компилирует lcd_gui.c в объектный файл lcd_gui.o.
# Зависимости: lcd_gui.c и lcd1602.h (если lcd1602.h изменится, lcd_gui.c будет перекомпилирован).
lcd_gui.o: lcd_gui.c lcd1602.h
	$(CC) $(CFLAGS) -c lcd_gui.c -o lcd_gui.o

# Цель 'lcd1602.o': Компилирует lcd1602.c в объектный файл lcd1602.o.
# Зависимости: lcd1602.c и lcd1602.h.
lcd1602.o: lcd1602.c lcd1602.h
	$(CC) -c lcd1602.c

# Цель 'clean': Удаляет все сгенерированные объектные файлы и исполняемый файл.
# Полезно для "чистой" пересборки проекта.
clean:
	rm -f *.o lcd_gui