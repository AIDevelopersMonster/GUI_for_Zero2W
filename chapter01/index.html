<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Глава 1: Начало работы &mdash; GUI_for_Zero2W 0.1 documentation</title>
      <link rel="stylesheet" href="../static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../static/css/theme.css" type="text/css" />
  
        <script data-url_root="../" id="documentation_options" src="../static/documentation_options.js"></script>
        <script src="../static/jquery.js"></script>
        <script src="../static/underscore.js"></script>
        <script src="../static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../static/doctools.js"></script>
        <script src="../static/sphinx_highlight.js"></script>
    <script src="../static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="Welcome to GUI_for_Zero2W’s documentation!" href="../index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            GUI_for_Zero2W
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Содержание:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Глава 1: Начало работы</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id2">Введение</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id3">Схема подключения</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id4">Пример кода: Управление светодиодом</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id5">Компиляция и запуск</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id6">Подключение светодиода</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id7">Физическая схема на макетной плате</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id8">Создание ярлыка на рабочем столе</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id9">Иконка приложения</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id10">Заключение</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">GUI_for_Zero2W</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Глава 1: Начало работы</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../sources/chapter01/index.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="id1">
<h1>Глава 1: Начало работы<a class="headerlink" href="#id1" title="Permalink to this heading"></a></h1>
<p>Отлично! Мы начинаем <strong>Главу 1</strong> нашего справочника по GUI для Raspberry Pi Zero 2 W.
Эта глава посвящена <strong>началу работы</strong> и включает в себя пример кода для управления светодиодом с помощью графического интерфейса <strong>GTK</strong>.</p>
<p>—</p>
<section id="id2">
<h2>Введение<a class="headerlink" href="#id2" title="Permalink to this heading"></a></h2>
<p>В этой главе мы создадим простейший графический интерфейс (GUI) на Raspberry Pi Zero 2 W с использованием:</p>
<ul class="simple">
<li><p><strong>Библиотеки GTK</strong> — для построения самого графического интерфейса.</p></li>
<li><p><strong>Библиотеки libgpiod</strong> — для взаимодействия с контактами GPIO (General Purpose Input/Output) вашего Raspberry Pi.</p></li>
</ul>
<p>В результате мы получим окно с кнопкой, которая будет включать и выключать светодиод, подключенный к пину <strong>GPIO17</strong> (это <strong>пин 11</strong> на физической раскладке контактов Raspberry Pi).</p>
<p>—</p>
</section>
<section id="id3">
<h2>Схема подключения<a class="headerlink" href="#id3" title="Permalink to this heading"></a></h2>
<p>Для работы примера вам потребуется подключить светодиод к Raspberry Pi. Ниже представлена схема, которая покажет, как это сделать:</p>
<a class="reference internal image-reference" href="../images/led_circuit_diagram.png"><img alt="Схема подключения светодиода" class="align-center" src="../images/led_circuit_diagram.png" style="width: 400px;" /></a>
<p>—</p>
</section>
<section id="id4">
<h2>Пример кода: Управление светодиодом<a class="headerlink" href="#id4" title="Permalink to this heading"></a></h2>
<p>Этот C-код создает простое GTK-окно с кнопкой для управления светодиодом через GPIO.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;gtk/gtk.h&gt;</span><span class="c1"> // Основная библиотека для создания GUI-приложений на GTK</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;gpiod.h&gt;</span><span class="c1">   // Библиотека для работы с GPIO на Linux-системах</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span><span class="c1">   // Стандартная библиотека ввода/вывода для функций вроде perror</span>

<span class="c1">// Определяем константы для удобства</span>
<span class="cp">#define CONSUMER &quot;GUI_for_Zero2W&quot; </span><span class="c1">// Имя, под которым ваше приложение будет &quot;запрашивать&quot; линию GPIO</span>
<span class="cp">#define CHIPNAME &quot;gpiochip0&quot;      </span><span class="c1">// Имя GPIO-контроллера на Raspberry Pi (обычно &#39;gpiochip0&#39;)</span>
<span class="cp">#define LED_LINE 17               </span><span class="c1">// Номер GPIO-пина, к которому подключен светодиод (GPIO17)</span>

<span class="c1">// Структура для хранения всех необходимых виджетов и данных</span>
<span class="c1">// Передаем указатель на эту структуру в колбэк-функцию, чтобы иметь доступ к данным</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">app_widgets</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">GtkWidget</span><span class="w"> </span><span class="o">*</span><span class="n">button</span><span class="p">;</span><span class="w">          </span><span class="c1">// Указатель на объект кнопки GTK</span>
<span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">gpiod_line</span><span class="w"> </span><span class="o">*</span><span class="n">line</span><span class="p">;</span><span class="w">    </span><span class="c1">// Указатель на объект конкретной линии GPIO</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">led_on</span><span class="p">;</span><span class="w">                 </span><span class="c1">// Переменная для отслеживания текущего состояния светодиода (0 - выключен, 1 - включен)</span>
<span class="p">};</span>

<span class="c1">// Функция, которая будет вызываться при нажатии на кнопку</span>
<span class="k">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">toggle_led</span><span class="p">(</span><span class="n">GtkButton</span><span class="w"> </span><span class="o">*</span><span class="n">button</span><span class="p">,</span><span class="w"> </span><span class="n">gpointer</span><span class="w"> </span><span class="n">user_data</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Приводим обобщенный указатель user_data к нашему типу struct app_widgets</span>
<span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">app_widgets</span><span class="w"> </span><span class="o">*</span><span class="n">widgets</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="k">struct</span><span class="w"> </span><span class="nc">app_widgets</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="n">user_data</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// Инвертируем текущее состояние светодиода</span>
<span class="w">    </span><span class="n">widgets</span><span class="o">-&gt;</span><span class="n">led_on</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">!</span><span class="n">widgets</span><span class="o">-&gt;</span><span class="n">led_on</span><span class="p">;</span>
<span class="w">    </span><span class="c1">// Устанавливаем значение на линии GPIO: 1 (HIGH) для включения, 0 (LOW) для выключения</span>
<span class="w">    </span><span class="n">gpiod_line_set_value</span><span class="p">(</span><span class="n">widgets</span><span class="o">-&gt;</span><span class="n">line</span><span class="p">,</span><span class="w"> </span><span class="n">widgets</span><span class="o">-&gt;</span><span class="n">led_on</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Обновляем текст на кнопке в зависимости от нового состояния светодиода</span>
<span class="w">    </span><span class="n">gtk_button_set_label</span><span class="p">(</span><span class="n">button</span><span class="p">,</span><span class="w"> </span><span class="n">widgets</span><span class="o">-&gt;</span><span class="n">led_on</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s">&quot;Выключить LED&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s">&quot;Включить LED&quot;</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// Главная функция программы</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">argv</span><span class="p">[])</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Инициализируем GTK. Это необходимо сделать в самом начале любого GTK-приложения.</span>
<span class="w">    </span><span class="n">gtk_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">argv</span><span class="p">);</span>

<span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">gpiod_chip</span><span class="w"> </span><span class="o">*</span><span class="n">chip</span><span class="p">;</span><span class="w"> </span><span class="c1">// Указатель на объект GPIO-чипа</span>
<span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">gpiod_line</span><span class="w"> </span><span class="o">*</span><span class="n">line</span><span class="p">;</span><span class="w"> </span><span class="c1">// Указатель на объект конкретной линии GPIO</span>

<span class="w">    </span><span class="c1">// Открываем GPIO-чип по его имени (gpiochip0)</span>
<span class="w">    </span><span class="n">chip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gpiod_chip_open_by_name</span><span class="p">(</span><span class="n">CHIPNAME</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">chip</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">perror</span><span class="p">(</span><span class="s">&quot;Ошибка при открытии gpiochip&quot;</span><span class="p">);</span><span class="w"> </span><span class="c1">// Выводим ошибку, если не удалось открыть чип</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="c1">// Завершаем программу с кодом ошибки</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Получаем конкретную линию GPIO по её номеру (LED_LINE = 17)</span>
<span class="w">    </span><span class="n">line</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gpiod_chip_get_line</span><span class="p">(</span><span class="n">chip</span><span class="p">,</span><span class="w"> </span><span class="n">LED_LINE</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">line</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">perror</span><span class="p">(</span><span class="s">&quot;Ошибка при получении линии GPIO&quot;</span><span class="p">);</span><span class="w"> </span><span class="c1">// Выводим ошибку</span>
<span class="w">        </span><span class="n">gpiod_chip_close</span><span class="p">(</span><span class="n">chip</span><span class="p">);</span><span class="w"> </span><span class="c1">// Не забудьте закрыть чип, если произошла ошибка</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Запрашиваем линию GPIO как выходную (output) с начальным значением 0 (выключено)</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">gpiod_line_request_output</span><span class="p">(</span><span class="n">line</span><span class="p">,</span><span class="w"> </span><span class="n">CONSUMER</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">perror</span><span class="p">(</span><span class="s">&quot;Ошибка при запросе линии для вывода&quot;</span><span class="p">);</span><span class="w"> </span><span class="c1">// Выводим ошибку</span>
<span class="w">        </span><span class="n">gpiod_chip_close</span><span class="p">(</span><span class="n">chip</span><span class="p">);</span><span class="w"> </span><span class="c1">// Закрываем чип</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Инициализируем нашу структуру app_widgets</span>
<span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">app_widgets</span><span class="w"> </span><span class="n">widgets</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">0</span><span class="p">};</span><span class="w"> </span><span class="c1">// Обнуляем всю структуру</span>
<span class="w">    </span><span class="n">widgets</span><span class="p">.</span><span class="n">line</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">line</span><span class="p">;</span><span class="w">             </span><span class="c1">// Сохраняем указатель на линию GPIO</span>
<span class="w">    </span><span class="n">widgets</span><span class="p">.</span><span class="n">led_on</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w">              </span><span class="c1">// Изначально светодиод выключен</span>

<span class="w">    </span><span class="c1">// Создаем главное окно приложения</span>
<span class="w">    </span><span class="n">GtkWidget</span><span class="w"> </span><span class="o">*</span><span class="n">window</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gtk_window_new</span><span class="p">(</span><span class="n">GTK_WINDOW_TOPLEVEL</span><span class="p">);</span>
<span class="w">    </span><span class="c1">// Устанавливаем заголовок окна</span>
<span class="w">    </span><span class="n">gtk_window_set_title</span><span class="p">(</span><span class="n">GTK_WINDOW</span><span class="p">(</span><span class="n">window</span><span class="p">),</span><span class="w"> </span><span class="s">&quot;LED Toggle&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="c1">// Устанавливаем размер окна по умолчанию</span>
<span class="w">    </span><span class="n">gtk_window_set_default_size</span><span class="p">(</span><span class="n">GTK_WINDOW</span><span class="p">(</span><span class="n">window</span><span class="p">),</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">);</span>
<span class="w">    </span><span class="c1">// Подключаем сигнал &quot;destroy&quot; (закрытие окна) к функции gtk_main_quit,</span>
<span class="w">    </span><span class="c1">// чтобы приложение завершалось при закрытии окна</span>
<span class="w">    </span><span class="n">g_signal_connect</span><span class="p">(</span><span class="n">window</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;destroy&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">G_CALLBACK</span><span class="p">(</span><span class="n">gtk_main_quit</span><span class="p">),</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Создаем кнопку с начальным текстом</span>
<span class="w">    </span><span class="n">widgets</span><span class="p">.</span><span class="n">button</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gtk_button_new_with_label</span><span class="p">(</span><span class="s">&quot;Включить LED&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="c1">// Подключаем сигнал &quot;clicked&quot; (нажатие) кнопки к нашей функции toggle_led</span>
<span class="w">    </span><span class="c1">// Передаем в качестве user_data адрес нашей структуры widgets</span>
<span class="w">    </span><span class="n">g_signal_connect</span><span class="p">(</span><span class="n">widgets</span><span class="p">.</span><span class="n">button</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;clicked&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">G_CALLBACK</span><span class="p">(</span><span class="n">toggle_led</span><span class="p">),</span><span class="w"> </span><span class="o">&amp;</span><span class="n">widgets</span><span class="p">);</span>
<span class="w">    </span><span class="c1">// Добавляем кнопку в окно</span>
<span class="w">    </span><span class="n">gtk_container_add</span><span class="p">(</span><span class="n">GTK_CONTAINER</span><span class="p">(</span><span class="n">window</span><span class="p">),</span><span class="w"> </span><span class="n">widgets</span><span class="p">.</span><span class="n">button</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Показываем все виджеты в окне (окно и кнопка)</span>
<span class="w">    </span><span class="n">gtk_widget_show_all</span><span class="p">(</span><span class="n">window</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Запускаем основной цикл GTK. Здесь приложение будет ожидать событий</span>
<span class="w">    </span><span class="c1">// (нажатий кнопок, закрытия окна и т.д.) до вызова gtk_main_quit.</span>
<span class="w">    </span><span class="n">gtk_main</span><span class="p">();</span>

<span class="w">    </span><span class="c1">// --- Блок очистки ресурсов после выхода из gtk_main ---</span>

<span class="w">    </span><span class="c1">// Убедимся, что светодиод выключен при завершении программы</span>
<span class="w">    </span><span class="n">gpiod_line_set_value</span><span class="p">(</span><span class="n">line</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
<span class="w">    </span><span class="c1">// Освобождаем линию GPIO</span>
<span class="w">    </span><span class="n">gpiod_line_release</span><span class="p">(</span><span class="n">line</span><span class="p">);</span>
<span class="w">    </span><span class="c1">// Закрываем GPIO-чип</span>
<span class="w">    </span><span class="n">gpiod_chip_close</span><span class="p">(</span><span class="n">chip</span><span class="p">);</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="c1">// Возвращаем 0, сигнализируя об успешном выполнении программы</span>
<span class="p">}</span>
</pre></div>
</div>
<p>—</p>
</section>
<section id="id5">
<h2>Компиляция и запуск<a class="headerlink" href="#id5" title="Permalink to this heading"></a></h2>
<p>Чтобы скомпилировать и запустить это приложение на вашем Raspberry Pi Zero 2 W, выполните следующие шаги в терминале:</p>
<ol class="arabic">
<li><p><strong>Установите необходимые библиотеки:</strong>
Перед компиляцией убедитесь, что у вас установлены библиотеки разработки для GTK3 и libgpiod.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>apt<span class="w"> </span>update<span class="w">                 </span><span class="c1"># Обновляем список пакетов</span>
sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>libgtk-3-dev<span class="w"> </span>libgpiod-dev<span class="w"> </span><span class="c1"># Устанавливаем библиотеки разработки</span>
</pre></div>
</div>
</li>
<li><p><strong>Сохраните код:</strong>
Сохраните приведенный выше C-код в файл с именем, например, <code class="docutils literal notranslate"><span class="pre">led_gui.c</span></code>.</p></li>
<li><p><strong>Скомпилируйте программу:</strong>
Используйте компилятор <code class="docutils literal notranslate"><span class="pre">gcc</span></code> для создания исполняемого файла. Флаги <code class="docutils literal notranslate"><span class="pre">$(pkg-config</span> <span class="pre">--cflags</span> <span class="pre">--libs</span> <span class="pre">gtk+-3.0</span> <span class="pre">libgpiod)</span></code> автоматически добавят все необходимые пути к заголовочным файлам и библиотекам GTK3 и libgpiod.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>gcc<span class="w"> </span>led_gui.c<span class="w"> </span>-o<span class="w"> </span>led_gui<span class="w"> </span><span class="k">$(</span>pkg-config<span class="w"> </span>--cflags<span class="w"> </span>--libs<span class="w"> </span>gtk+-3.0<span class="w"> </span>libgpiod<span class="k">)</span><span class="w"> </span>-Wall<span class="w"> </span>-Wextra
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">gcc</span></code>: компилятор C.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">led_gui.c</span></code>: ваш исходный файл.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-o</span> <span class="pre">led_gui</span></code>: указывает, что выходной исполняемый файл будет называться <code class="docutils literal notranslate"><span class="pre">led_gui</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">$(pkg-config</span> <span class="pre">--cflags</span> <span class="pre">--libs</span> <span class="pre">gtk+-3.0</span> <span class="pre">libgpiod)</span></code>: эта команда динамически предоставляет компилятору флаги, необходимые для включения заголовочных файлов (<code class="docutils literal notranslate"><span class="pre">--cflags</span></code>) и линковки с библиотеками (<code class="docutils literal notranslate"><span class="pre">--libs</span></code>) GTK3 и libgpiod.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-Wall</span> <span class="pre">-Wextra</span></code>: включают все стандартные и дополнительные предупреждения компилятора, что помогает выявлять потенциальные ошибки.</p></li>
</ul>
</li>
<li><p><strong>Запустите программу:</strong>
После успешной компиляции вы можете запустить ваше приложение.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./led_gui
</pre></div>
</div>
<p>Если все настроено правильно, на рабочем столе Raspberry Pi должно появиться небольшое окно с кнопкой!</p>
</li>
</ol>
<p>—</p>
</section>
<section id="id6">
<h2>Подключение светодиода<a class="headerlink" href="#id6" title="Permalink to this heading"></a></h2>
<p>Прежде чем запускать программу, убедитесь, что светодиод подключен правильно. Не забудьте использовать <strong>резистор</strong>, чтобы ограничить ток через светодиод и предотвратить его (и ваш Raspberry Pi) повреждение!</p>
<ul class="simple">
<li><p><strong>Длинная ножка светодиода (анод)</strong> → подключается к одному концу <strong>резистора</strong> (например, 220 Ом).</p></li>
<li><p><strong>Другой конец резистора</strong> → подключается к <strong>GPIO17 (пин 11)</strong> на Raspberry Pi.</p></li>
<li><p><strong>Короткая ножка светодиода (катод)</strong> → подключается к любому пину <strong>GND (земля)</strong> на Raspberry Pi.</p></li>
</ul>
<p>—</p>
</section>
<section id="id7">
<h2>Физическая схема на макетной плате<a class="headerlink" href="#id7" title="Permalink to this heading"></a></h2>
<p>Для наглядности, вот как это может выглядеть на макетной плате:</p>
<a class="reference internal image-reference" href="../images/breadboard_fritzing.png"><img alt="Подключение на макетной плате" class="align-center" src="../images/breadboard_fritzing.png" style="width: 600px;" /></a>
<p>—</p>
</section>
<section id="id8">
<h2>Создание ярлыка на рабочем столе<a class="headerlink" href="#id8" title="Permalink to this heading"></a></h2>
<p>Чтобы ваше приложение было удобно запускать, вы можете создать ярлык на рабочем столе или в меню приложений.</p>
<ol class="arabic">
<li><p><strong>Создайте файл ``.desktop``:</strong>
Сохраните следующий текст в файл с именем <code class="docutils literal notranslate"><span class="pre">led_gui.desktop</span></code>. Убедитесь, что пути <code class="docutils literal notranslate"><span class="pre">Exec</span></code> и <code class="docutils literal notranslate"><span class="pre">Icon</span></code> соответствуют фактическому расположению вашего исполняемого файла и иконки.</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[Desktop Entry]</span>
<span class="na">Name</span><span class="o">=</span><span class="s">LED Toggle</span><span class="w">                     </span><span class="c1"># Имя, которое будет отображаться для ярлыка</span>
<span class="na">Comment</span><span class="o">=</span><span class="s">Управление светодиодом через GTK GUI</span><span class="w"> </span><span class="c1"># Краткое описание</span>
<span class="na">Exec</span><span class="o">=</span><span class="s">/home/pi/GUI4RPiZ2W/1/led_gui</span><span class="w">  </span><span class="c1"># Полный путь к вашему исполняемому файлу</span>
<span class="na">Icon</span><span class="o">=</span><span class="s">/home/pi/GUI4RPiZ2W/1/icon.png</span><span class="w"> </span><span class="c1"># Полный путь к файлу иконки</span>
<span class="na">Terminal</span><span class="o">=</span><span class="s">false</span><span class="w">                      </span><span class="c1"># Устанавливаем false, так как это графическое приложение</span>
<span class="na">Type</span><span class="o">=</span><span class="s">Application</span><span class="w">                    </span><span class="c1"># Указывает, что это приложение</span>
<span class="na">Categories</span><span class="o">=</span><span class="s">Utility</span><span class="c1">;                 # Категория, в которой ярлык будет отображаться в меню</span>
</pre></div>
</div>
<ul class="simple">
<li><p><strong>Важно:</strong> Замените <code class="docutils literal notranslate"><span class="pre">/home/pi/GUI4RPiZ2W/1/</span></code> на актуальный путь, где вы сохранили <code class="docutils literal notranslate"><span class="pre">led_gui</span></code> и <code class="docutils literal notranslate"><span class="pre">icon.png</span></code>.</p></li>
</ul>
</li>
<li><p><strong>Сделайте файл исполняемым:</strong>
Дайте файлу <code class="docutils literal notranslate"><span class="pre">.desktop</span></code> права на выполнение.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>chmod<span class="w"> </span>+x<span class="w"> </span>led_gui.desktop
</pre></div>
</div>
</li>
<li><p><strong>Переместите ярлык в меню приложений:</strong>
Скопируйте файл <code class="docutils literal notranslate"><span class="pre">.desktop</span></code> в папку, где хранятся ярлыки приложений.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cp<span class="w"> </span>led_gui.desktop<span class="w"> </span>~/.local/share/applications/
</pre></div>
</div>
<p>После этого ваш ярлык “LED Toggle” должен появиться в меню “Программирование” или “Утилиты” (в зависимости от вашей версии Raspberry Pi OS) или в общем списке приложений.</p>
</li>
<li><p><strong>Для рабочего стола:</strong>
Если вы хотите, чтобы ярлык был прямо на рабочем столе, после копирования файла на рабочий стол (например, <code class="docutils literal notranslate"><span class="pre">cp</span> <span class="pre">led_gui.desktop</span> <span class="pre">~/Desktop/</span></code>), возможно, потребуется щелкнуть по нему правой кнопкой мыши и выбрать опцию “Разрешить запуск” или “Allow Launching” в его свойствах.</p></li>
</ol>
<p>—</p>
</section>
<section id="id9">
<h2>Иконка приложения<a class="headerlink" href="#id9" title="Permalink to this heading"></a></h2>
<p>Вы можете использовать любую иконку. Вот пример иконки, которую можно использовать:</p>
<a class="reference internal image-reference" href="../images/icon.png"><img alt="Иконка светодиода" class="align-center" src="../images/icon.png" style="width: 64px;" /></a>
<p>—</p>
</section>
<section id="id10">
<h2>Заключение<a class="headerlink" href="#id10" title="Permalink to this heading"></a></h2>
<p>Поздравляем! Вы только что успешно создали полноценное GTK-приложение на Raspberry Pi, которое управляет реальным светодиодом через GPIO. Это отличный первый шаг к созданию более сложных и интерактивных GUI-приложений для ваших проектов на Raspberry Pi.</p>
<p>В следующих главах мы продолжим развивать интерфейс, добавляя больше элементов управления, таких как поля ввода, ползунки, а также будем работать с таймерами и другими компонентами GUI для создания более функциональных приложений.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../index.html" class="btn btn-neutral float-left" title="Welcome to GUI_for_Zero2W’s documentation!" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Alex Malachevsky.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>